http://www.plantuml.com/plantuml/uml/jLXTZjis47xNAVXaI8Q374318ksc0G9aiscwQD6dWfPeXOb4gYIrWM6qr-a9Ue9Sh3Gr7eqeHbwqw9F8cM-6ypCaXtff7JTkwDgiQhcrxFlX-4v_OQUCiRVw4tyjhQmuQt48z7lLIYLOYqDFVnILquQzk6sbK4viRrWLHfJtOBYolEBQSrqOV_thwz_24iXhRPIeHAsDnnnmSeP8vPXrklfy_vdExgJoK--8arMWgg4JHeCTjlJCZ85dUU67VvBnevOrutKDw1o-R0F68yQ8JZ-A2ymw8rN3bEv40ROqmlqq6fSNhDBAEi80Ev43IkqaCoWh6oLgwcL1SQ0Y0WAL6F5kvZsk-4S6ASOSX2opIyJsmfHXtl7-nNkZwy7fxUxClM6_3rmvMVDQZ91Nt0bMSyV355A7GZUi7qTsPDTwsBU2FV9McmVjU3kIdpyN8MVMfutRlDU6rU8WbJH5u5_g2Ce8bdxF6zxvgTuo9tkDqp8BR7GkByev0JExhNQZ0vlwAPZTqht7WeJ1H_pylSGvS21fm26B4HOiHPO40FhT82XI3YKB1kKNmrXVN0E4V99qeW0MU2J3jlqJC6czM94_8fs89EE5wSnXHDqYf8P2PveEHWfLCssT4RpRCDqBmyF1yeBbG6KRlHjbo6ROkAASDidTq3gvvwhIfmmSCU8WZ52LvEE1mWW8gerI5bM_YxH4zV016VaIXx6ai9dVS21vn1jr8351ZswvSLpV6b5BDph5MkqbOFkFRAphO3Zi-42Zuk1kJAGUxnBATwWOn042fnQWaXk9i9Tweq3-38RdCpUYBOkW9mOHgcB_2p-6s8413w8DEwA5aXWHOtXW4eK5104nEO-QKlv72AhZUkQ3psF2PrV7KN1JBicTLkvZWbxputG_U09S3G5kV_D4A9JnC2odyMBHNMB1tMAnAAjtlBzetMlTCcb32YFQMy5x6i3OsiOh2WRVKTp2Lm_xLN2JIWLmBhuKIsbS92aEB7Jy6mfUyMDIF30mGclvltuQ8XLFGxofi7X85tZArgxwCpFxzjt3DW0iabgyyJ2nn87LImSLegsaCprTxqkGlUn9AotihUxwLZXkIz-eVEAivuqUhekLpCFFhKm5yeRAu5sFlJ6OakpfpYoI-u_wotTjcmeJnial7Dh4VBqHkCGXGYqxaWWmzKauObjNb6Ct9rNbC-KbkM4QEihxmyCK6jhTR5YptWB5e53qlRRBRcJTxFrm1AzdpTsrdkb1BvtrQ1TB9ciKlVw_XDVQE2WyaTO2I5fHc26igJKCxel_qdQHdLhCMXGd6ctaUDIG9nOoplI95wvEoiR73feV0D5p3TU3WCQh0TbJf-qOZi0v2Hw-qGF7poS_M8M6KvCcUoVafkAG7AIDvOzO6czyLg9fATSfE_AaYBI0DqajX1qvNyJ9mEWbxQ5icf6uVTE6D4qZ5-ODy9UlMjZSSIv9htQhbQVl1pyLwJfwMldGjeqgJOj7aAKjeI0ZBpw8Hbh7w-dn8MjYhkYuR9Sk_70c9um01XMcNhofbpA12hQI3JFzcrd4-Tz64tNZU-wq-6a0dIKYylX1k7niUSHgKPLhLGMoqhY1jzVxw_67otH4HhzLeaimC6CHy6X1Zrfz36EiDmPYWSQuz9-4LNtUJ_Whk7tsZFI34HNESqh5iuiIeSG9YPHLXY9CUyRb99xK1p9UQ14ZZbw61U9N6LzZCzBy_HgXyIMVuN9XyNEF795GC8ijODkPkNGzeWr24i3n2P2z5AeUklOV

@startuml
class BuyNow {
  LojaFisica lojaFisica
  LojaOnline lojaOnline
  vector <Cliente*> cliente
  vector <Transacao*> transações
  vector <Fornecedor*> fornecedors
  int stockOk
  int stockMin
  static int numeroClientes;
  
  BuyNow()
  ~BuyNow()
  void addCliente(Cliente &cliente)
  void removeCliente(string nome)
  int getStockOk() const
  int getStockMin() const
  void setStockOk(unsigned int stockOk)
  void setStockMin(unsigned int stockMin)
  int getNumeroClientes() const
}

class Transacao {
    int number;
    map<Produto*, int> quantidade;
    Date data;
    vector<Produto*> produtos;
    double valorTotal;
    //estatisticas(por definir)
    Cliente* cliente;
    Pagamento* tipoPagamento;

    Transacao();
    Transacao(Cliente *c, Date &d);
    Transacao(Cliente *c, Date &d, vector<Produto*> v);
    Date getDate() const;
    void setDate(Date &d);
    void setCliente(Cliente *c);
    Cliente* getCliente() const;
    void addProduto(Produto* p);
    void addProduto(Produto* p, int quantidade);
    void removeProduto(Produto *p);
    void removeProduto(Produto *p, int quantidade);
    int getQuantidade(Produto *p) const;
    void setPagamento(Pagamento* p);
    Pagamento* getPagamento() const;
    friend ostream& operator << (ostream &o, const Transacao &t);
}

class Multibanco{
   int referencia
  
    Multibanco();
    Multibanco(double valorTotal, int referencia);
    void setReferencia(int referencia);
    int getReferencia() const;
    string getInfo() const;
}

class CartaoCredito{
    long int numCartao;
    Date validade;

    CartaoCredito();
    CartaoCredito(double valor, long int numCartao, Date val);
    long int getNumCartao() const;
    void setNumCartao(long int numCartao);
    void setValidade(Date validade);
    Date getValidade() const;
    string getInfo() const;
}
class MbWay{
   int numTelemovel
  
    MbWay();
    MbWay(double valor, int num);
    int getNumTelemovel() const;
    void setNumTelemovel(int num);
    string getInfo() const;
}

class Date{
    unsigned int year;
    unsigned int month;
    unsigned int day;
    map<int, int> months_map;

    Date();
    Date(unsigned int year, unsigned int month, unsigned int day);
    void setMap();
    bool isValid();
    bool isLeap() const;
    map<int, int> getMonthsMap() const;
    unsigned int getYear() const;
    void setYear(int year);
    unsigned int getMonth() const;
    void setMonth(int month);
    unsigned int getDay() const;
    void setDay(int day);
    string getInfo() const;
    friend ostream& operator << (ostream& o, const Date &d);
}

class LojaFisica{
   vector<Produto*> produtos
   
   void addProduto(Produto &produto)
   vector<Produto*> getProdutos() const;
   void removeProduto(Produto &produto)
}

class LojaOnline{
    vector<Produto*> produtos;
    vector<Transacao*> transacoesCompletas; //ja pagou
    vector<Transacao*> transacoes;  //por completar
    vector<Cliente *> clientes;
    unsigned int stockMin;
  
    void showAllProdutos() const;
    void reporStock();
    void addProduto(Produto produto);
    void addCliente(Cliente *c);
    void addTransacao(Transacao *t);    //incrementar o numberOfTransacoes;
    Cliente& getCliente(Cliente *c);
    Cliente& getCliente(int pos);
    void removeCliente(Cliente *c);
    void buyProduto(Cliente *c, Produto* p);
    void addProdutoToTransacao(Transacao* t, Produto* p);
    void removeProdutoOfTransacao(Transacao* t, Produto* p);
    void removeProdutoOfTransacao(Transacao* t, Produto* p, int quantidade);
    void completeTransacao(Transacao* t);
    void showAllTransacoes() const;
    void showAllTransacoesCompletas() const;
    friend ostream& operator << (ostream &o, const LojaOnline);
}

class Categoria{
   string nomeCategoria
   
   string getNomeCategoria() const
   void setNome(string nome)
}

class Produto{
   string nomeProduto
   int stockFisico
   int stockOnline
   double valor
   Categoria categoria

   void setCategoria(Categoria &cat);
   Categoria& getCategoria() const;
   int getStockFisico() const
   void setStockFisico(int stockFisico)
   int getStockOnline() const
   void setStockOnline(int stockOnline) 
   string getNomeProduto() const
   void setNomeProduto(string nome)
    void setValor(double val)
    double getValor() const
}

class Cliente{
   string nome
   int numContribuinte
   
   string getNome() const
   void setNome(string nome)
   int getNumContribuinte() const
   void setNumContribuinte(int numContribuinte)
}


class ClienteRegistado{
   int id
   string email
   
   string getEmail() const
   void setEmail(string email)
   int getId() const
   void setId(int num)
}

class Fornecedor{
   string nome

   string getNome() const
   void setNome(string nome)
}

class Pagamento{
    double valor;

    Pagamento();
    Pagamento(double valorTotal);
    void setValor(double val);
    double getValor() const;
    virtual string getInfo() const;
}

class NumeroTransacoes{
    int numberOfTransacoes;

    NumeroTransacoes();
    NumeroTransacoes(int num);
    void setNumberOfTransacoes(int num);
    int getNumberOfTransacoes() const;
    void addNumberOfTransacoes(int num);
}

BuyNow *-- LojaFisica
BuyNow *-- LojaOnline
BuyNow *-- Categoria
BuyNow *-- Cliente
BuyNow *-- Fornecedor
Categoria o-- Produto
LojaOnline o-- Transacao
LojaOnline o--NumeroTransacoes
Pagamento*-- MbWay
Pagamento*-- CartaoCredito
Pagamento*-- Multibanco
Transacao o-- Date
Transacao o-- Pagamento
NumeroTransacoes *-- Transacao
CartaoCredito o-- Date
Cliente *-- ClienteRegistado
@enduml