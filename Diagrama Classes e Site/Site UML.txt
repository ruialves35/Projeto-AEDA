@startuml
class BuyNow {
  LojaFisica lojaFisica
  LojaOnline lojaOnline
  vector <Cliente*> cliente
  vector <Transacao*> transações
  vector <Fornecedor*> fornecedors
  int stockOk
  int stockMin
  static int numeroClientes;
  
  BuyNow()
  ~BuyNow()
  void addCliente(Cliente &cliente)
  void removeCliente(string nome)
  int getStockOk() const
  int getStockMin() const
  void setStockOk(unsigned int stockOk)
  void setStockMin(unsigned int stockMin)
  int getNumeroClientes() const
}

class Transacao {
    int number;
    map<Produto*, int> quantidade;
    Date data;
    vector<Produto*> produtos;
    double valorTotal;
    //estatisticas(por definir)
    Cliente* cliente;
    Pagamento* tipoPagamento;

    Transacao();
    Transacao(Cliente *c, Date &d);
    Transacao(Cliente *c, Date &d, vector<Produto*> v);
    Date getDate() const;
    void setDate(Date &d);
    void setCliente(Cliente *c);
    Cliente* getCliente() const;
    void addProduto(Produto* p);
    void addProduto(Produto* p, int quantidade);
    void removeProduto(Produto *p);
    void removeProduto(Produto *p, int quantidade);
    int getQuantidade(Produto *p) const;
    void setPagamento(Pagamento* p);
    Pagamento* getPagamento() const;
    friend ostream& operator << (ostream &o, const Transacao &t);
}

class Multibanco{
   int referencia
  
    Multibanco();
    Multibanco(double valorTotal, int referencia);
    void setReferencia(int referencia);
    int getReferencia() const;
    string getInfo() const;
}

class CartaoCredito{
    long int numCartao;
    Date validade;

    CartaoCredito();
    CartaoCredito(double valor, long int numCartao, Date val);
    long int getNumCartao() const;
    void setNumCartao(long int numCartao);
    void setValidade(Date validade);
    Date getValidade() const;
    string getInfo() const;
}
class MbWay{
   int numTelemovel
  
    MbWay();
    MbWay(double valor, int num);
    int getNumTelemovel() const;
    void setNumTelemovel(int num);
    string getInfo() const;
}

class Date{
    unsigned int year;
    unsigned int month;
    unsigned int day;
    map<int, int> months_map;

    Date();
    Date(unsigned int year, unsigned int month, unsigned int day);
    void setMap();
    bool isValid();
    bool isLeap() const;
    map<int, int> getMonthsMap() const;
    unsigned int getYear() const;
    void setYear(int year);
    unsigned int getMonth() const;
    void setMonth(int month);
    unsigned int getDay() const;
    void setDay(int day);
    string getInfo() const;
    friend ostream& operator << (ostream& o, const Date &d);
}

class LojaFisica{
   vector<Produto*> produtos
   
   void addProduto(Produto &produto)
   vector<Produto*> getProdutos() const;
   void removeProduto(Produto &produto)
}

class LojaOnline{
    vector<Produto*> produtos;
    vector<Transacao*> transacoesCompletas; //ja pagou
    vector<Transacao*> transacoes;  //por completar
    vector<Cliente *> clientes;
    unsigned int stockMin;
  
    void showAllProdutos() const;
    void reporStock();
    void addProduto(Produto produto);
    void addCliente(Cliente *c);
    void addTransacao(Transacao *t);    //incrementar o numberOfTransacoes;
    Cliente& getCliente(Cliente *c);
    Cliente& getCliente(int pos);
    void removeCliente(Cliente *c);
    void buyProduto(Cliente *c, Produto* p);
    void addProdutoToTransacao(Transacao* t, Produto* p);
    void removeProdutoOfTransacao(Transacao* t, Produto* p);
    void removeProdutoOfTransacao(Transacao* t, Produto* p, int quantidade);
    void completeTransacao(Transacao* t);
    void showAllTransacoes() const;
    void showAllTransacoesCompletas() const;
    friend ostream& operator << (ostream &o, const LojaOnline);
}

class Categoria{
   string nomeCategoria
   
   string getNomeCategoria() const
   void setNome(string nome)
}

class Produto{
   string nomeProduto
   int stockFisico
   int stockOnline
   double valor
   Categoria categoria

   void setCategoria(Categoria &cat);
   Categoria& getCategoria() const;
   int getStockFisico() const
   void setStockFisico(int stockFisico)
   int getStockOnline() const
   void setStockOnline(int stockOnline) 
   string getNomeProduto() const
   void setNomeProduto(string nome)
    void setValor(double val)
    double getValor() const
}

class Cliente{
   string nome
   int numContribuinte
   vector<Produtos*> produtos;
   
   string getNome() const
   void setNome(string nome)
   int getNumContribuinte() const
   void setNumContribuinte(int numContribuinte)
   void addProduto(Produto *p);
   void removeProduto(Produto *p);
   void addProduto(Produto *p, int quantidade);
   void removeProduto(Produto *p, int quantidade);
}


class ClienteRegistado{
   int id
   string email
   
   string getEmail() const
   void setEmail(string email)
   int getId() const
   void setId(int num)
}

class Fornecedor{
   string nome

   string getNome() const
   void setNome(string nome)
}

class Pagamento{
    double valor;

    Pagamento();
    Pagamento(double valorTotal);
    void setValor(double val);
    double getValor() const;
    virtual string getInfo() const;
}

class NumeroTransacoes{
    int numberOfTransacoes;

    NumeroTransacoes();
    NumeroTransacoes(int num);
    void setNumberOfTransacoes(int num);
    int getNumberOfTransacoes() const;
    void addNumberOfTransacoes(int num);
}

BuyNow *-- LojaFisica
BuyNow *-- LojaOnline
BuyNow *-- Categoria
BuyNow *-- Cliente
BuyNow *-- Fornecedor
Categoria o-- Produto
LojaOnline o-- Transacao
LojaOnline o--NumeroTransacoes
Pagamento*-- MbWay
Pagamento*-- CartaoCredito
Pagamento*-- Multibanco
Transacao o-- Date
Transacao o-- Pagamento
NumeroTransacoes *-- Transacao
CartaoCredito o-- Date
Cliente *-- ClienteRegistado
@enduml